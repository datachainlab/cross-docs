"use strict";(self.webpackChunkcross_docs=self.webpackChunkcross_docs||[]).push([[12],{3905:(t,e,n)=>{n.d(e,{Zo:()=>u,kt:()=>m});var r=n(7294);function a(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function o(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}function i(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?o(Object(n),!0).forEach((function(e){a(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):o(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}function c(t,e){if(null==t)return{};var n,r,a=function(t,e){if(null==t)return{};var n,r,a={},o=Object.keys(t);for(r=0;r<o.length;r++)n=o[r],e.indexOf(n)>=0||(a[n]=t[n]);return a}(t,e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(t);for(r=0;r<o.length;r++)n=o[r],e.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(t,n)&&(a[n]=t[n])}return a}var s=r.createContext({}),l=function(t){var e=r.useContext(s),n=e;return t&&(n="function"==typeof t?t(e):i(i({},e),t)),n},u=function(t){var e=l(t.components);return r.createElement(s.Provider,{value:e},t.children)},p="mdxType",d={inlineCode:"code",wrapper:function(t){var e=t.children;return r.createElement(r.Fragment,{},e)}},h=r.forwardRef((function(t,e){var n=t.components,a=t.mdxType,o=t.originalType,s=t.parentName,u=c(t,["components","mdxType","originalType","parentName"]),p=l(n),h=a,m=p["".concat(s,".").concat(h)]||p[h]||d[h]||o;return n?r.createElement(m,i(i({ref:e},u),{},{components:n})):r.createElement(m,i({ref:e},u))}));function m(t,e){var n=arguments,a=e&&e.mdxType;if("string"==typeof t||a){var o=n.length,i=new Array(o);i[0]=h;var c={};for(var s in e)hasOwnProperty.call(e,s)&&(c[s]=e[s]);c.originalType=t,c[p]="string"==typeof t?t:a,i[1]=c;for(var l=2;l<o;l++)i[l]=n[l];return r.createElement.apply(null,i)}return r.createElement.apply(null,n)}h.displayName="MDXCreateElement"},7751:(t,e,n)=>{n.r(e),n.d(e,{assets:()=>s,contentTitle:()=>i,default:()=>d,frontMatter:()=>o,metadata:()=>c,toc:()=>l});var r=n(7462),a=(n(7294),n(3905));const o={sidebar_position:1,id:"overview"},i="Overview",c={unversionedId:"docs/architecture/overview",id:"docs/architecture/overview",title:"Overview",description:"Cross Framework is composed of the following components:",source:"@site/docs/01-docs/03-architecture/01-overview.md",sourceDirName:"01-docs/03-architecture",slug:"/docs/architecture/overview",permalink:"/cross-docs/docs/architecture/overview",draft:!1,tags:[],version:"current",sidebarPosition:1,frontMatter:{sidebar_position:1,id:"overview"},sidebar:"tutorialSidebar",previous:{title:"Install",permalink:"/cross-docs/docs/getting-started/install"},next:{title:"Smart Contract",permalink:"/cross-docs/docs/architecture/smart-contract"}},s={},l=[{value:"Tx Initiator",id:"tx-initiator",level:3},{value:"Authenticator",id:"authenticator",level:3},{value:"Tx Runner",id:"tx-runner",level:3},{value:"Contract Manager",id:"contract-manager",level:3},{value:"Contract Module",id:"contract-module",level:3}],u={toc:l},p="wrapper";function d(t){let{components:e,...n}=t;return(0,a.kt)(p,(0,r.Z)({},u,n,{components:e,mdxType:"MDXLayout"}),(0,a.kt)("h1",{id:"overview"},"Overview"),(0,a.kt)("p",null,"Cross Framework is composed of the following components:"),(0,a.kt)("p",null,(0,a.kt)("img",{parentName:"p",src:"https://user-images.githubusercontent.com/1170428/136157600-5f459aa6-a0d3-44df-9d16-31da4d4d1d4e.png",alt:"Fig. Architecture"})),(0,a.kt)("h3",{id:"tx-initiator"},"Tx Initiator"),(0,a.kt)("p",null,"Tx Initiator accepts a transaction (MsgInitiateTx) submitted by an actor. After validating the transaction, it performs ",(0,a.kt)("a",{parentName:"p",href:"./cross-chain-transaction#link"},"Link processing")," between Contract Transactions for cross-chain calls."),(0,a.kt)("p",null,"It then generates a unique TxID for each submitted transaction, retrieves the Account required to authenticate the Contract Transaction contained in the transaction, and calls Authenticator. The transaction is blocked until the Authenticator completes all necessary authentications. After completion, Tx Runner initiates the transaction."),(0,a.kt)("p",null,"The details of submitting a Transaction are described in ",(0,a.kt)("a",{parentName:"p",href:"/cross-docs/docs/architecture/cross-chain-transaction#initiate-transaction"},"Initiate Transaction"),"."),(0,a.kt)("h3",{id:"authenticator"},"Authenticator"),(0,a.kt)("p",null,"Authenticator provides a transaction authentication process and manages its status. Several authentication methods are supported, including authentication on the execution chain and authentication on other chains using IBC."),(0,a.kt)("p",null,"Each authentication process is not only performed synchronously in the transaction submission chain but may also be processed asynchronously or by a packet from another chain."),(0,a.kt)("p",null,"Therefore, it is necessary to specify TxID to identify the target transaction at the authentication. The details of the authentication process are described in ",(0,a.kt)("a",{parentName:"p",href:"/cross-docs/docs/architecture/cross-chain-transaction#authentication"},"Authentication"),"."),(0,a.kt)("h3",{id:"tx-runner"},"Tx Runner"),(0,a.kt)("p",null,"Tx Runner executes transactions that Authenticator has successfully authenticated. Since transactions are executed on multiple chains, they must be able to be executed atomically. For this reason, it supports the ",(0,a.kt)("a",{parentName:"p",href:"/cross-docs/docs/architecture/atomic-commit-protocol"},"Atomic commit protocol"),". e.g. Two-phase commit protocol, Simple commit protocol"),(0,a.kt)("p",null,"A commit protocol that a Transaction uses depends on the method specified by ",(0,a.kt)("inlineCode",{parentName:"p"},"MsgInitiateTx"),". The submitting chain is the coordinator of the commit protocol and communicates with other chains via IBC Channel. It decides whether to commit or abort and requests the result to each participant."),(0,a.kt)("h3",{id:"contract-manager"},"Contract Manager"),(0,a.kt)("p",null,"Contract Manager manages Contract Module that implements a contract and ",(0,a.kt)("a",{parentName:"p",href:"/cross-docs/docs/architecture/state-store"},"State Store"),". It also provides API to commit and discard changes. These APIs are called by Tx Runner corresponding to the status of the commit protocol flow."),(0,a.kt)("h3",{id:"contract-module"},"Contract Module"),(0,a.kt)("p",null,"Contract Module defines a smart contract. It is implemented by the developer who uses the framework."),(0,a.kt)("p",null,"A module must satisfy the following interfaces:"),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-go"},"type ContractModule interface {\n    OnContractCall(ctx context.Context, signers []authtypes.Account, callInfo txtypes.ContractCallInfo) (*txtypes.ContractCallResult, error)\n}\n")),(0,a.kt)("p",null,"A contract is executed by TxRunner when ",(0,a.kt)("inlineCode",{parentName:"p"},"OnContractCall")," is called with a call information and authentication information; A contract generally needs to validate that an authentication process of Account is specified in ",(0,a.kt)("inlineCode",{parentName:"p"},"signers"),". You can find an example implementation of Contract Module ",(0,a.kt)("a",{parentName:"p",href:"https://github.com/datachainlab/cross/blob/v0.2.0/simapp/samplemod/module.go"},"here"),"."))}d.isMDXComponent=!0}}]);